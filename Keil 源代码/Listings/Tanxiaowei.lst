C51 COMPILER V9.54   TANXIAOWEI                                                            03/15/2020 18:46:41 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE TANXIAOWEI
OBJECT MODULE PLACED IN .\Objects\Tanxiaowei.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Spring Program Files(x86)\MDK4 and MDK5\C51\BIN\C51.EXE Tanxiaowei.c OPTIMIZ
                    -E(8,SPEED) BROWSE INCDIR(..\Keil 源代码 - 副本) DEBUG OBJECTEXTEND PRINT(.\Listings\Tanxiaowei.lst) TABS(2) OBJECT(.\Obj
                    -ects\Tanxiaowei.obj)

line level    source

   1          
   2          
   3          /********************************基于51的智能工厂火灾监测预警系统软件设计说明书***************************
             -****************/
   4          
   5          
   6          
   7          
   8          
   9          
  10          
  11          
  12          /*-------------------------------------------------分割线-------------------------------------------------
             -------------------------*/
  13          
  14          
  15          
  16          
  17          
  18          
  19          #include "include.h"
  20          
  21          
  22          #include "lcd.h"    //1602液晶显示相关文件
  23          #include "Display.h"  //显示单元，包括MAX7219驱动数码管，RGB灯，【额外把蜂鸣器写在这里面】
  24          #include "Sensor.h"   //传感器相关，包括DHT11温湿度传感器，MQ-2烟雾传感器（AD转换和数字量触发中断）
  25          
  26          
  27          #include "Motor.h"    //步进电机相关
  28          #include "Usart.h"    //串口收发相关
  29          
  30          uchar  str[11] = "Spring_Text";
  31          
  32          //uint tab[4] = {0xfe,0xfd,0xfb,0xf7};  //每次只有一个管脚输出低电平，电机转动
  33          
  34          
  35          
  36          
  37          void main()
  38          {
  39   1        uchar temperature=1,humidity=1;   //定义温湿度采集值
  40   1        uchar state;  //定义DHT11错误类型
  41   1        int color=1;  //定义颜色变化值
  42   1        uint AD_value;  //定义烟雾浓度传感器的模拟值
  43   1        
  44   1        
  45   1        uint i;
  46   1        
  47   1        MAX7219_Init();
  48   1        LCD_Init();
  49   1      
  50   1        //测试lcd液晶
  51   1        SetPoint_xy(1,2);
C51 COMPILER V9.54   TANXIAOWEI                                                            03/15/2020 18:46:41 PAGE 2   

  52   1        for(i=0;i<11;i++)
  53   1        {
  54   2          write_date(str[i]);
  55   2        }
  56   1        
  57   1        
  58   1        
  59   1        FM_TurnON();
  60   1        delay_ms(300);
  61   1        FM_TurnOFF();
  62   1        
  63   1        FirePipes_Control(90);delay_ms(1500);
  64   1        FirePipes_Control(0);delay_ms(1500);
  65   1        FirePipes_Control(90);delay_ms(1500);
  66   1        FirePipes_Control(0);delay_ms(1500);
  67   1        
  68   1        while(1)
  69   1        {
  70   2          color++;
  71   2          RGB_TurnON(color%3+1);
  72   2          delay_ms(600);
  73   2          RGB_TurnOFF(color%3+1); //正常运行LED闪烁提示
  74   2          
  75   2          FirePipes_Control(45);
  76   2          
  77   2          
  78   2          state = DHT11_GetValue(&temperature,&humidity); //采集温湿度
  79   2          AD_value = Get_AD_Value(0); //采集烟雾浓度
  80   2          
  81   2          Write7219(1,number[temperature/10]);
  82   2          Write7219(2,number[temperature%10]);
  83   2          Write7219(7,number[humidity/10]);
  84   2          Write7219(8,number[humidity%10]);
  85   2      
  86   2          SetPoint_xy(2,2);
  87   2          write_date('0' + AD_value/100);
  88   2          write_date('0' + AD_value/10%10);
  89   2          write_date('0' + AD_value%10);
  90   2          
  91   2        }
  92   1      }
  93          
  94          //END of Function
  95          
  96          
  97          
  98          
  99          
 100          
 101          
 102          
 103          
 104          
 105          
 106          
 107          
 108          
 109          
 110          
 111          
 112          
 113          
C51 COMPILER V9.54   TANXIAOWEI                                                            03/15/2020 18:46:41 PAGE 3   

 114          
 115          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    363    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     11       9
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
